<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        LS Lab 3 - Infrastructure as Code (IaC) - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><h1 id="LS-Lab-3---Infrastructure-as-Code-IaC" data-id="LS-Lab-3---Infrastructure-as-Code-IaC"><a class="anchor hidden-xs" href="#LS-Lab-3---Infrastructure-as-Code-IaC" title="LS-Lab-3---Infrastructure-as-Code-IaC"><span class="octicon octicon-link"></span></a><span>LS Lab 3 - Infrastructure as Code (IaC)</span></h1><p><strong><span>Name: Vladimir Shelkovnikov</span></strong></p><hr><h2 id="Task-1---IaC-Theory" data-id="Task-1---IaC-Theory"><a class="anchor hidden-xs" href="#Task-1---IaC-Theory" title="Task-1---IaC-Theory"><span class="octicon octicon-link"></span></a><span>Task 1 - IaC Theory</span></h2><div class="alert alert-success">
<p><span>Briefly answer the following questions what is and for what:</span></p>
</div><hr><center>
<h3 id="git-repository" data-id="git-repository"><a class="anchor hidden-xs" href="#git-repository" title="git-repository"><span class="octicon octicon-link"></span></a><span>git repository:</span></h3>
</center><hr><blockquote>
<p><strong><span>/.git</span></strong><span> - folder, which contains required information for Git version control system. It is initialized by the command </span><code>git init</code><span>.</span></p>
</blockquote><hr><blockquote>
<p><strong><span>/.github</span></strong><span> - special folder in GitHub repository, which is used to place Github-related stuff inside it. It is usually hidden from the user.</span></p>
</blockquote><hr><blockquote>
<p><strong><span>.gitignore</span></strong><span> - contains files and folders, which should be hidden from the Git version control system.</span></p>
</blockquote><hr><blockquote>
<p><strong><span>.gitmodules</span></strong><span> - a text file with a syntax matching the requirements of git-config.</span></p>
</blockquote><hr><center>
<h3 id="ansible-directory" data-id="ansible-directory"><a class="anchor hidden-xs" href="#ansible-directory" title="ansible-directory"><span class="octicon octicon-link"></span></a><span>ansible directory:</span></h3>
</center><hr><blockquote>
<p><strong><span>ansible.cfg</span></strong><span> - configuration file. On default contains inventory, remote_user, and ask_pass</span></p>
</blockquote><hr><blockquote>
<p><strong><span>inventory folder</span></strong><span> - one of the way to contain a list of managed nodes.  It contains multiple inventory sources and source types under a directory.</span></p>
</blockquote><hr><blockquote>
<p><strong><span>roles folder</span></strong><span> - used to make it easy to re-use the code. An Ansible role is composed of multiple folders, each of which contains several YAML files.</span></p>
</blockquote><hr><blockquote>
<blockquote>
<p><strong><span>tasks</span></strong><span> - contains the main YAML files. The code within those files executes the main role tasks by calling all the other defined elements of the role.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<blockquote>
<p><strong><span>defaults</span></strong><span> -  contains </span><code>defaults/main.yml</code><span>. This is a configuration file that can be used to define default values for variables used in the role. It allows for centralized management of the role.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<blockquote>
<p><strong><span>files</span></strong><span> -  holds all extra files that are required to achieve the role task. These files usually get dispatched to remote hosts as part of certain tasks.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<blockquote>
<p><strong><span>handlers</span></strong><span> - contains </span><code>handlers/main.yml</code><span>, which define handlers like </span><code>restart Nginx</code><span>. It is mainly used for service management to apply a configuration change performed by another task.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<blockquote>
<p><strong><span>templates</span></strong><span> - contains the template files used by the role to create the actual configuration files. These are then deployed by the role to the remote hosts.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><strong><span>playbooks</span></strong><span> - contains ordered lists of tasks/variables, saved so those tasks can be run in that order repeatedly.</span></p>
</blockquote><hr><center>
<h3 id="terraform-folder" data-id="terraform-folder"><a class="anchor hidden-xs" href="#terraform-folder" title="terraform-folder"><span class="octicon octicon-link"></span></a><span>terraform folder:</span></h3>
</center><hr><blockquote>
<p><strong><a href="http://main.tf" target="_blank" rel="noopener"><span>main.tf</span></a></strong><span> - holds all module blocks and any needed resources not contained within nested modules. A simple </span><a href="http://main.tf" target="_blank" rel="noopener"><span>main.tf</span></a><span> file, without any nested modules, declares all resources within this file.</span></p>
</blockquote><hr><blockquote>
<p><strong><a href="http://variables.tf" target="_blank" rel="noopener"><span>variables.tf</span></a></strong><span> - contains input variable declarations.</span></p>
</blockquote><hr><blockquote>
<p><strong><a href="http://outputs.tf" target="_blank" rel="noopener"><span>outputs.tf</span></a></strong><span> - contains output variable declarations.</span></p>
</blockquote><hr><h2 id="Task-2---Choose-your-applicationmicroservices" data-id="Task-2---Choose-your-applicationmicroservices"><a class="anchor hidden-xs" href="#Task-2---Choose-your-applicationmicroservices" title="Task-2---Choose-your-applicationmicroservices"><span class="octicon octicon-link"></span></a><span>Task 2 - Choose your application/microservices</span></h2><div class="alert alert-success">
<p><span>The base level (it means that this task will be evaluated very meticulously): find (much better to write) a simple application with REST interface. For example, it could be a web server that returns “Hello to SNE family! Time is: &lt; current time in Innopolis &gt;”. Use whatever programming language that you want (python, golang, C#, java…).</span><br>
<strong><span>Semi-Bonus:</span></strong><span> prepare microservices instead of standalone application, e.g. full stack web application with web server, database…</span></p>
</div><p><span>😂 I tried to avoid it in the second lab, but it appears again. So let’s do it. I decided to create something similar to this example [4]. Therefore, I suggested the following services:</span></p><ul>
<li><span>Backend - Nodejs and Express.js</span></li>
<li><span>Frontend - React.js</span></li>
<li><span>Server - Nginx</span></li>
<li><span>Database - MySQL</span></li>
</ul><p><span>I uploaded my app to Github  [5]. This is a simple service for book reviews, which can also be used as a notebook (Figure 1). It also has an admin panel (Figure 2). Figure 3 shows requests to the server.</span></p><center>
<p><img src="https://i.imgur.com/tFUpfzN.png" alt="" loading="lazy"><br>
<span>Figure 1 - Client</span></p>
<p><img src="https://i.imgur.com/P1QPM2r.png" alt="" loading="lazy"><br>
<span>Figure 2 - Adminer</span></p>
<p><img src="https://i.imgur.com/IeqdLaT.png" alt="" loading="lazy"><br>
<span>Figure 3 - Requests to the server</span></p>
</center><hr><h2 id="Task-3---Dockerize-your-application" data-id="Task-3---Dockerize-your-application"><a class="anchor hidden-xs" href="#Task-3---Dockerize-your-application" title="Task-3---Dockerize-your-application"><span class="octicon octicon-link"></span></a><span>Task 3 - Dockerize your application</span></h2><div class="alert alert-success">
<ol>
<li><span>Build Docker image for your application (make Dockerfile). Look for the best Docker practices, try to follow them and put into report.</span><br>
<span>Bonus: use docker-compose in the case of microservices.</span></li>
</ol>
</div><p><span>I started with a Dockerfile for the client (Figure 4).</span></p><center>
<p><img src="https://i.imgur.com/cWW6b89.png" alt="" loading="lazy"><br>
<span>Figure 4 - Dockerfile (client)</span></p>
</center><p><span>Here for node.js image I have set workdir = </span><code>usr/scr/app</code><span>.</span></p><blockquote>
<p><span>Dockerfile reference for the WORKDIR instruction [6]</span><br>
<span>For clarity and reliability, you should always use absolute paths for your WORKDIR. Also, you should use WORKDIR instead of proliferating instructions like RUN cd … &amp;&amp; do-something, which are hard to read, troubleshoot, and maintain.</span></p>
</blockquote><p><span>Then I copy the files from the client to the image and install the dependencies using npm. After that, I configure the client’s IP address and build my application using the </span><code>npm run build</code><span> command. The built client then is inserted into Nginx.</span></p><p><span>Figure 5 shows the Server Dockerfile. It has similar content.</span></p><center>
<p><img src="https://i.imgur.com/8dlBZ0l.png" alt="" loading="lazy"><br>
<span>Figure 5 - Dockerfile (server)</span></p>
</center><p><span>It uses the image of the nodejs and copies the  configuration file into it. Figure 6 shows the first part of the </span><code>docker-compose.yml</code><span> file.</span></p><center>
<p><img src="https://i.imgur.com/us1Z6zG.png" alt="" loading="lazy"><br>
<span>Figure 6 - The first part of docker-compose.yml</span></p>
</center><p><span>First I defined some common variables for MySQL. Then I started the </span><code>mysql</code><span> container and filled the new volume with the contents of </span><code>./setup.sql</code><span>. Then I configured ports and environment variables for this.</span></p><blockquote>
<p><span>The VOLUME instruction should be used to expose any database storage area, configuration storage, or files/folders created by your docker container. You are strongly encouraged to use VOLUME for any mutable and/or user-serviceable parts of your image [6].</span></p>
</blockquote><p><span>I configured the server in the same way. To control the order of starting and shutting down the service, I used the </span><code>depends_on</code><span> option.</span></p><p><span>Figure 7 shows the second part of the </span><code>docker-compose.yml</code><span> file.</span></p><center>
<p><img src="https://i.imgur.com/OH2zHbT.png" alt="" loading="lazy"><br>
<span>Figure 7 - The second part of the docker-compose.yml</span></p>
</center><p><span>To create a client, I used create-react-app, so to run it in docker, I need to set two parameters:</span></p><pre><code>stdin_open: true
environment:
    - CHOKIDAR_USEPOLLING=true
</code></pre><p><span>create-react-app uses chokidar to watch file changes, and it has a flag CHOKIDAR_USEPOLLING to use polling to watch for file changes.</span></p><p><span>I also configure the bridge network at the end of the </span><code>docker-compose.yml</code><span> file.</span></p><hr><h2 id="Task-4---Deliver-your-app-using-Software-Conﬁguration-Management" data-id="Task-4---Deliver-your-app-using-Software-Conﬁguration-Management"><a class="anchor hidden-xs" href="#Task-4---Deliver-your-app-using-Software-Conﬁguration-Management" title="Task-4---Deliver-your-app-using-Software-Conﬁguration-Management"><span class="octicon octicon-link"></span></a><span>Task 4 - Deliver your app using Software Conﬁguration Management</span></h2><div class="alert alert-success">
<ol>
<li><span>Get your personal cloud account.</span></li>
<li><span>Use Terraform to deploy your required cloud instance. Look for the best Terraform practices, try to follow them and put into report.</span><br>
<strong><span>Bonus</span></strong><span>: use Packer to deploy your cloud image/docker container.</span></li>
<li><span>Choose SCM tool.</span></li>
<li><span>Using SCM tool, write a playbook tasks to deliver your application to cloud instance. Try to separate your configuration files into inventory/roles/playbooks files. In real practice, we almost newer use poor playbooks where everything all in one.</span></li>
</ol>
<blockquote>
<p><span>Also try to use the best practices for you SCM tool and put them into report.</span><br>
<span>Use Molecula and Ansible Lint to test your application before to deliver to cloud (or their equivalents).</span></p>
</blockquote>
</div><p><span>In the previous block, I used AWS for DNS labs, then I got $300 from Amazon, so I will work with it.</span></p><p><span>Now I need to install Terraform:</span></p><pre><code>// Install dependencies
sudo apt-get update
sudo apt-get install -y gnupg software-properties-common curl
// Add the HashiCorp GPG key.
curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -
// Add the repository.
sudo apt-add-repository "deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main"
//Install the Terraform CLI and AWS CLI.
sudo apt-get install terraform awscli
</code></pre><p><span>Figure 8 shows the installed terraform.</span></p><center>
<p><img src="https://i.imgur.com/8rxSjXY.png" alt="" loading="lazy"><br>
<span>Figure 8 - Installed terraform</span></p>
</center><p><span>Now let’s configure the AWS CLI using the command </span><code>aws configure</code><span>. After that, I set up </span><code>main.tf</code><span> file as shown in Figure 9.</span></p><center>
<p><img src="https://i.imgur.com/vlRhxae.png" alt="" loading="lazy"><br>
<span>Figure 9 - </span><a href="http://main.tf" target="_blank" rel="noopener"><span>main.tf</span></a></p>
</center><p><span>There are two blocks:</span></p><ol>
<li><span>Resource - define infrastructure.</span></li>
<li><span>Provider - used by Terraform to connect to remote systems.</span></li>
</ol><p><span>AMI ID corresponds to Ubuntu focal (20.04). It uses an SSH key called </span><code>LS3.pem</code><span> and a security group that opens SSH and HTTP  ports.</span></p><p><span>I initialized the directory with the command </span><code>terraform init</code><span> (Figure 10).</span></p><center>
<p><img src="https://i.imgur.com/dSwvhht.png" alt="" loading="lazy"><br>
<span>Figure 10 - terraform init</span></p>
</center><p><span>I generated an execution plan by running the command </span><code>terraform plan -out create-aws-instance</code><span>. Then I run the </span><code>terraform apply "create-aws-instance"</code><span> command to create an instance (Figures 11 and 12).</span></p><center>
<p><img src="https://i.imgur.com/AKt0UBA.png" alt="" loading="lazy"><br>
<span>Figure 11 - Executed command</span></p>
<p><img src="https://i.imgur.com/CyXe8l6.png" alt="" loading="lazy"><br>
<span>Figure 12 - New AWS Instance</span></p>
</center><p><span>I choose Ansible as an SCM tool. So I installed it using the command </span><code>sudo apt install ansible</code><span>.</span><br>
<span>Create data structure - </span><code>sudo mkdir files templates playbooks roles inventory</code><span>.</span></p><div class="alert alert-info">
<p><span>When I tried to deploy my application in an AWS instance, I ran into a lot of problems with MySQL. It takes a very long time to run it. So at this stage, I replaced it with a local JSON  database.</span></p>
</div><p><span>Then I configured </span><code>ansible.cfg</code><span> file as shown in Figure 13.</span></p><center>
<p><img src="https://i.imgur.com/8BtoZWG.png" alt="" loading="lazy"><br>
<span>Figure 13 - ansible.cfg</span></p>
</center><p><span>Here I just added the path to the inventory and the key to connect.</span></p><p><span>Figure 14 shows the inventory configuration.</span></p><center>
<p><img src="https://i.imgur.com/mHpPGwH.png" alt="" loading="lazy"><br>
<span>Figure 14 - Inventory</span></p>
</center><p><span>Then I made sure that AWS can be reached (Figure 15).</span></p><center>
<p><img src="https://i.imgur.com/tZiaOhM.png" alt="" loading="lazy"><br>
<span>Figure 15 - Access to AWS</span></p>
</center><p><span>To deploy my docker containers to instance, I created two playbooks: one to install docker, docker-composer, npm, etc; second to build the containers</span></p><p><span>To deploy my docker containers in an instance, I created two playbooks:</span></p><ul>
<li><span>one for installing docker, docker-composer, npm, etc.;</span></li>
<li><span>the second for building containers (Figure 16).</span></li>
</ul><center>
<p><img src="https://i.imgur.com/8St8Jzd.png" alt="" loading="lazy"><br>
<span>Figure 16 - The second playbook</span></p>
</center><p><span>Here I connect to the instance and become the root user. Then I copy my repository to it. After that, I build and launch my containers.</span></p><blockquote>
<p><span>There is module docker-compose for working with it, but it does not work for me, so here I used shell.</span></p>
</blockquote><p><span>I launched the playbook using the command </span><code>ansible-playbook deploy-app.yaml</code><span> (Figure 17).</span></p><center>
<p><img src="https://i.imgur.com/lMvqX3I.png" alt="" loading="lazy"><br>
<span>Figure 17 - Successfully deployed</span></p>
</center><p><span>Right now I should be able to access it using an AWS IP address (Figure 18) or DNS (Figure 19). Figure 20 shows the requests.</span></p><center>
<p><img src="https://i.imgur.com/4EI8jLp.png" alt="" loading="lazy"><br>
<span>Figure 18 - Access via IP</span></p>
<p><img src="https://i.imgur.com/05Zk0JC.png" alt="" loading="lazy"><br>
<span>Figure 19 - Access via DNS</span></p>
<p><img src="https://i.imgur.com/a3PMbWO.png" alt="" loading="lazy"><br>
<span>Figure 20 - requests</span></p>
</center><h3 id="Bonus---Packer" data-id="Bonus---Packer"><a class="anchor hidden-xs" href="#Bonus---Packer" title="Bonus---Packer"><span class="octicon octicon-link"></span></a><span>Bonus - Packer</span></h3><p><span>I installed packer with following commands:</span></p><pre><code>// Add the HashiCorp GPG key.
curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -
// Add the repository.
sudo apt-add-repository "deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main"
// Install packer
sudo apt install packer
</code></pre><p><span>Figure 21 verifies that packer is installed.</span></p><center>
<p><img src="https://i.imgur.com/4JhNBAy.png" alt="" loading="lazy"><br>
<span>Figure 21 - Packer is installed</span></p>
</center><p><span>Then I created a configuration file for the packer as shown in Figure 22.</span></p><center>
<p><img src="https://i.imgur.com/3qVmOU4.png" alt="" loading="lazy"><br>
<span>Figure 22 - JSON file</span></p>
</center><p><span>Here I deleted the AWS keys. Then I set up the instance in the builder block and installed the commands in the provisioners’ block, which I put in a separate file </span><code>base-setup</code><span> (Figure 23).</span></p><center>
<p><img src="https://i.imgur.com/dJrlbyN.png" alt="" loading="lazy"><br>
<span>Figure 23 - Commands</span></p>
</center><p><span>Then I run the command </span><code>packer build build.json</code><span>. Figures 24, 25, and 26 show the result.</span></p><center>
<p><img src="https://i.imgur.com/Tu1uxVe.png" alt="" loading="lazy"><br>
<span>Figure 24 - packer build</span></p>
<p><img src="https://i.imgur.com/i69eLAJ.png" alt="" loading="lazy"><br>
<span>Figure 25 - New instance</span></p>
<p><img src="https://i.imgur.com/1gGyaXU.png" alt="" loading="lazy"><br>
<span>Figure 26 - App is working</span></p>
</center><hr><h2 id="Task-5---Teamwork-with-the-version-control-system-optional" data-id="Task-5---Teamwork-with-the-version-control-system-optional"><a class="anchor hidden-xs" href="#Task-5---Teamwork-with-the-version-control-system-optional" title="Task-5---Teamwork-with-the-version-control-system-optional"><span class="octicon octicon-link"></span></a><span>Task 5 - Teamwork with the version control system (optional)</span></h2><div class="alert alert-success">
<p><span>You can do this task if you have different projects with your cooperation team and you want to be more familiar with git. In production, before deploying the version of the service/application, we receive a review from colleagues.</span></p>
<ol>
<li><span>Create and log in to your personal version control system account on the git engine.</span></li>
<li><span>Create a repository with your application/microservices and all required scripts/configs.</span></li>
<li><span>Synchronize your local and remote repository.</span></li>
<li><span>Create a separate branch for development, as well as protect your master branch in the repository from direct commits to it.</span></li>
<li><span>Create a Pull Request from your developer branch to the master branch.</span></li>
<li><span>Your colleague should get explanation about your work and conduct a review of your PR.</span></li>
<li><span>Receive an approvement, merge your PR and synchronize the local and remote repositories.</span></li>
</ol>
<p><strong><span>Bonus</span></strong><span>: implement steps 2 and 4 via Terraform.</span></p>
</div><p><span>I have already created a repository on GitHub, so I will use it. I synchronized it with the local repository and created a new branch, as shown in Figure 27.</span></p><center>
<p><img src="https://i.imgur.com/zvU06HX.png" alt="" loading="lazy"><br>
<span>Figure 28 - Creating a new branch</span></p>
</center><p><span>I have set up a branch protection rule for the main branch (Figure 28).</span></p><center>
<p><img src="https://i.imgur.com/a7PCAMc.png" alt="" loading="lazy"><br>
<span>Figure 28 - Branch protection rule</span></p>
</center><p><span>Then I added the Ansible  playbooks to the repository using the command </span><code>git commit -a -m "Add ansible playbooks"</code><span> and pushed it to the new branch </span><code>git push origin development</code><span>.</span><br>
<span>Then I created a pull request to the main branch as shown in Figure 29.</span></p><center>
<p><img src="https://i.imgur.com/9QL6LGC.png" alt="" loading="lazy"><br>
<span>Figure 29 - Pull request</span></p>
</center><p><span>But since I have a branch protection rule in the main branch, I need some additional actions to merge them (Figure 30).</span></p><center>
<p><img src="https://i.imgur.com/JRAY3gi.png" alt="" loading="lazy"><br>
<span>Figure 30 - Additional actions are required</span></p>
</center><p><span>Then I added Ivan as a collaborator (Figure 31).</span></p><center>
<p><img src="https://i.imgur.com/hwZz06x.png" alt="" loading="lazy"><br>
<span>Figure 32 - Added collaborator</span></p>
</center><p><span>Then, for my pull request, I set appointed him as a reviewer (Figure 33).</span></p><center>
<p><img src="https://i.imgur.com/bRO5Dm4.png" alt="" loading="lazy"><br>
<span>Figure 33 - Ivan is set as a reviewer</span></p>
</center><p><span>He approved my pull request so that I could merge my branches (Figure 27).</span></p><center>
<p><img src="https://i.imgur.com/y79l4S3.png" alt="" loading="lazy"><br>
<span>Figure 34 - Pull request is approved</span></p>
</center><p><span>So I merge my pull request as shown in Figure 34.</span></p><center>
<p><img src="https://i.imgur.com/yhVJkR5.png" alt="" loading="lazy"><br>
<span>Figure 35 - Pull request is merged</span></p>
</center><p><span>Then I goes to the main branch and synchronized my local repository with the remote one (Figure 36).</span></p><center>
<p><img src="https://i.imgur.com/oMDgq9X.png" alt="" loading="lazy"><br>
<span>Figure 37 - Synchronized my local repository with the remote</span></p>
</center><h3 id="Bonus" data-id="Bonus"><a class="anchor hidden-xs" href="#Bonus" title="Bonus"><span class="octicon octicon-link"></span></a><span>Bonus</span></h3><p><span>Let’s configure the 2nd and 4th steps with terraform. For this, I set up </span><code>main.tf</code><span> as shown in Figure 38.</span></p><center>
<p><img src="https://i.imgur.com/C8hgrQc.png" alt="" loading="lazy"><br>
<span>Figure 38 - </span><a href="http://main.tf" target="_blank" rel="noopener"><span>main.tf</span></a></p>
</center><p><span>At first, I created a new access token with </span><code>repo, admin:org, and delete_repo</code><span> permissions. Then I created a new repository called </span><code>l3-task5-terraform</code><span> with the main branch. After that, I added a </span><code>.gitignore</code><span> file to this. Next, I set up a new branch called </span><code>dev</code><span>. Also, I added Ilya and Ivan as my collaborators. I configured branch protection for the main branch.</span></p><p><span>Then I initialized terraform using the command </span><code>terraform init</code><span> and created a new plan </span><code>terraform plan --out "task5-bonus"</code><span>. Let’s run it - </span><code>terraform apply "task5-terraform"</code><span> (Figure 39).</span></p><center>
<p><img src="https://i.imgur.com/ycjCl81.png" alt="" loading="lazy"><br>
<span>Figure 39 - Execute terraform</span></p>
</center><p><span>Let’s see GitHub. There is a new repository (Figure 40). There are two collaborators (Figure 41) and a branch protection rule for the main branch (Figure 42).</span></p><center>
<p><img src="https://i.imgur.com/TXjOYbS.png" alt="" loading="lazy"><br>
<span>Figure 40 - New repository</span></p>
<p><img src="https://i.imgur.com/ifUhIIu.png" alt="" loading="lazy"><br>
<span>Figure 41 - Two collaborators</span></p>
<p><img src="https://i.imgur.com/TUTw08k.png" alt="" loading="lazy"><br>
<span>Figure 42 - New branch protection rule</span></p>
</center><p><span>I changed the Ivans repository as shown in Figure 43 and pushed it to the </span><code>development</code><span> branch. Then I created a pull request (Figure 44). Then Ivan reviews my request and requests some changes (Figure 45). After I changed it, he accepts the request (Figure 46).</span></p><center>
<p><img src="https://i.imgur.com/xYNsKZL.png" alt="" loading="lazy"><br>
<span>Figure 43 - Modification in Ivans repository</span></p>
<p><img src="https://i.imgur.com/gM6yzMb.png" alt="" loading="lazy"><br>
<span>Figure 44 - Pull request</span></p>
<p><img src="https://i.imgur.com/cHHHnIL.png" alt="" loading="lazy"><br>
<span>Figure 45 - Review</span></p>
<p><img src="https://i.imgur.com/HAn8c86.png" alt="" loading="lazy"><br>
<span>Figure 46 - Branch is merged</span></p>
</center><hr><h2 id="Task-6---Play-with-SCM-cases" data-id="Task-6---Play-with-SCM-cases"><a class="anchor hidden-xs" href="#Task-6---Play-with-SCM-cases" title="Task-6---Play-with-SCM-cases"><span class="octicon octicon-link"></span></a><span>Task 6 - Play with SCM cases</span></h2><div class="alert alert-success">
<p><span>The goal is to easily, reliably and quickly maintain different kinds of systems at once. Prepare two different guest systems e.g. an Ubuntu Server and Fedora. Then play with some Software Configuration Management (SCM) to automate system preparations on those. You might create and provide your own ideas or follow suggestions.</span></p>
<blockquote>
<p><span>Never forget to try to use the best practices. Complete as many tasks as possible (at least two cases for a team of two people, one case for an individual work).</span></p>
</blockquote>
</div><hr><p><span>Let’s set up Docker on Ubuntu and Fedora. To do this, I changed the </span><code>main.tf</code><span> file as shown in Figure 47.</span></p><center>
<p><img src="https://i.imgur.com/YvZkXJq.png" alt="" loading="lazy"><br>
<span>Figure 47 - </span><a href="http://main.tf" target="_blank" rel="noopener"><span>main.tf</span></a></p>
</center><p><span>Then I run the command </span><code>terraform plan --out task6</code><span>, and then create the instances using the created plan </span><code>terraform apply "task6"</code><span> (Figure 48).</span></p><center>
<p><img src="https://i.imgur.com/QZdI6EI.png" alt="" loading="lazy"><br>
<span>Figure 48 - Creating the instances</span></p>
</center><p><span>This destroyed my previous instance and created two new ones. Then I added them to the ansible inventory. I created a new playbook to configure docker for Fedora (Figure 49).</span></p><center>
<p><img src="https://i.imgur.com/a4GctrP.png" alt="" loading="lazy"><br>
<span>Figure 49 - Playbook for Fedora</span></p>
</center><p><span>Then I run it (Figures 50, 51, and 52).</span></p><center>
<p><img src="https://i.imgur.com/TLPd2eM.png" alt="" loading="lazy"><br>
<span>Figure 50 - Running playbook for Fedora</span></p>
<p><img src="https://i.imgur.com/JdPHgO4.png" alt="" loading="lazy"><br>
<span>Figure 51 - Docker status</span></p>
<p><img src="https://i.imgur.com/16zqlNm.png" alt="" loading="lazy"><br>
<span>Figure 52 - Status</span></p>
</center><p><span>Same thing I did for Ubuntu. Figure 53 shows the playbook. Figures 54 and 55 show the result.</span></p><center>
<p><img src="https://i.imgur.com/KmpSCHW.png" alt="" loading="lazy"><br>
<span>Figure 53 - Playbook</span></p>
<p><img src="https://i.imgur.com/fgtQv31.png" alt="" loading="lazy"><br>
<span>Figure 54 - Rinning playbook for Ubuntu</span></p>
<p><img src="https://i.imgur.com/S0kQfKh.png" alt="" loading="lazy"><br>
<span>Figure 55 - Status</span></p>
</center><hr><h2 id="References" data-id="References"><a class="anchor hidden-xs" href="#References" title="References"><span class="octicon octicon-link"></span></a><span>References</span></h2><ol>
<li><a href="https://git-scm.com/doc" target="_blank" rel="noopener"><span>Git documentation</span></a></li>
<li><a href="https://docs.ansible.com" target="_blank" rel="noopener"><span>Ansible documentation</span></a></li>
<li><a href="https://www.terraform.io/docs" target="_blank" rel="noopener"><span>Terraform Documentation</span></a></li>
<li><a href="https://medium.com/devplanet/deploying-microservices-with-docker-compose-1aff3d8af9a5" target="_blank" rel="noopener"><span>Deploying Microservices with Docker Compose</span></a></li>
<li><a href="https://github.com/MrRahmat/react-nodejs-rest-docker" target="_blank" rel="noopener"><span>My app</span></a></li>
<li><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener"><span>Best practices for writing Dockerfiles</span></a></li>
<li><a href="https://learn.hashicorp.com/collections/terraform/aws-get-started" target="_blank" rel="noopener"><span>Terraform. Get Started - AWS</span></a></li>
<li><a href="https://reflectoring.io/terraform-aws/" target="_blank" rel="noopener"><span>Using Terraform to Deploy AWS Resources</span></a></li>
<li><a href="https://github.com/terraform-aws-modules/terraform-aws-ec2-instance/blob/master/main.tf" target="_blank" rel="noopener"><span>Terraform and AWS EC2 Instance example</span></a></li>
<li><a href="https://learn.hashicorp.com/tutorials/packer/get-started-install-cli" target="_blank" rel="noopener"><span>Install Packer</span></a></li>
<li><a href="https://github.com/zalari/ansible-deploy-docker-compose/blob/master/tasks/main.yml" target="_blank" rel="noopener"><span>Ansible playbook example</span></a></li>
<li><a href="https://docs.docker.com/engine/install/fedora" target="_blank" rel="noopener"><span>Install Docker Engine on Fedora</span></a></li>
<li><a href="https://github.blog/2016-12-07-introducing-review-requests/" target="_blank" rel="noopener"><span>Introducing review requests</span></a></li>
<li><a href="https://www.hashicorp.com/blog/managing-github-with-terraform" target="_blank" rel="noopener"><span>Managing GitHub with Terraform</span></a></li>
<li><a href="https://terraform-eap.website.yandexcloud.net/docs/providers/github/index.html" target="_blank" rel="noopener"><span>Terraform &amp; GitHub</span></a></li>
</ol></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li><a href="#LS-Lab-3---Infrastructure-as-Code-IaC" title="LS Lab 3 - Infrastructure as Code (IaC)">LS Lab 3 - Infrastructure as Code (IaC)</a><ul class="nav">
<li><a href="#Task-1---IaC-Theory" title="Task 1 - IaC Theory">Task 1 - IaC Theory</a></li>
<li><a href="#Task-2---Choose-your-applicationmicroservices" title="Task 2 - Choose your application/microservices">Task 2 - Choose your application/microservices</a></li>
<li><a href="#Task-3---Dockerize-your-application" title="Task 3 - Dockerize your application">Task 3 - Dockerize your application</a></li>
<li><a href="#Task-4---Deliver-your-app-using-Software-Conﬁguration-Management" title="Task 4 - Deliver your app using Software Conﬁguration Management">Task 4 - Deliver your app using Software Conﬁguration Management</a><ul class="nav">
<li><a href="#Bonus---Packer" title="Bonus - Packer">Bonus - Packer</a></li>
</ul>
</li>
<li><a href="#Task-5---Teamwork-with-the-version-control-system-optional" title="Task 5 - Teamwork with the version control system (optional)">Task 5 - Teamwork with the version control system (optional)</a><ul class="nav">
<li><a href="#Bonus" title="Bonus">Bonus</a></li>
</ul>
</li>
<li><a href="#Task-6---Play-with-SCM-cases" title="Task 6 - Play with SCM cases">Task 6 - Play with SCM cases</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li><a href="#LS-Lab-3---Infrastructure-as-Code-IaC" title="LS Lab 3 - Infrastructure as Code (IaC)">LS Lab 3 - Infrastructure as Code (IaC)</a><ul class="nav">
<li><a href="#Task-1---IaC-Theory" title="Task 1 - IaC Theory">Task 1 - IaC Theory</a></li>
<li><a href="#Task-2---Choose-your-applicationmicroservices" title="Task 2 - Choose your application/microservices">Task 2 - Choose your application/microservices</a></li>
<li><a href="#Task-3---Dockerize-your-application" title="Task 3 - Dockerize your application">Task 3 - Dockerize your application</a></li>
<li><a href="#Task-4---Deliver-your-app-using-Software-Conﬁguration-Management" title="Task 4 - Deliver your app using Software Conﬁguration Management">Task 4 - Deliver your app using Software Conﬁguration Management</a><ul class="nav">
<li><a href="#Bonus---Packer" title="Bonus - Packer">Bonus - Packer</a></li>
</ul>
</li>
<li><a href="#Task-5---Teamwork-with-the-version-control-system-optional" title="Task 5 - Teamwork with the version control system (optional)">Task 5 - Teamwork with the version control system (optional)</a><ul class="nav">
<li><a href="#Bonus" title="Bonus">Bonus</a></li>
</ul>
</li>
<li><a href="#Task-6---Play-with-SCM-cases" title="Task 6 - Play with SCM cases">Task 6 - Play with SCM cases</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
